<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Oscar JOSEPH-GENESLAY - Portfolio</title>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;700&family=Open+Sans:wght@400;600&display=swap" rel="stylesheet">
    
    <style>
        :root {
            /* Couleurs de base */
            --text-main: #2c3e50;
            --text-light: #636e72;
            --white: #ffffff;
            --bg-global: #fdfdfd;
            
            /* Thèmes par section */
            /* 1. Portfolio (Beige/Terre) */
            --theme-port-bg: #fdfbf7;
            --theme-port-accent: #a1887f;
            --theme-port-dark: #5d4037;

            /* 2. Formation (Bleu Pâle) */
            --theme-form-bg: #f0f8ff;
            --theme-form-accent: #64b5f6;
            --theme-form-dark: #1976d2;

            /* 3. Expérience (Rouge Pâle/Cnam) */
            --theme-exp-bg: #fff5f5;
            --theme-exp-accent: #e57373;
            --theme-exp-dark: #c0392b;

            /* Ombres */
            --shadow: 0 10px 30px rgba(0,0,0,0.05);
            --shadow-hover: 0 20px 40px rgba(0,0,0,0.1);
        }

        * { box-sizing: border-box; }

        body {
            font-family: 'Open Sans', sans-serif;
            background-color: var(--bg-global);
            color: var(--text-main);
            margin: 0;
            padding: 0;
            line-height: 1.6;
            overflow-x: hidden;
            transition: background-color 0.5s ease;
        }

        /* --- ANIMATION ARCS DE CERCLE --- */
        .arcs-container {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            z-index: -1; overflow: hidden; pointer-events: none;
        }

        .arc {
            position: absolute;
            border-radius: 50%;
            border: 2px solid rgba(0,0,0,0.03);
            transition: all 1s ease;
        }

        /* Arc Gauche */
        .arc-left-1 {
            width: 60vh; height: 60vh;
            left: -30vh; top: 20%;
            border-right: 4px solid rgba(0,0,0,0.06);
            animation: rotateArc 40s linear infinite;
        }
        .arc-left-2 {
            width: 80vh; height: 80vh;
            left: -40vh; top: 15%;
            border-right: 2px solid rgba(0,0,0,0.04);
            animation: rotateArcReverse 60s linear infinite;
        }

        /* Arc Droit */
        .arc-right-1 {
            width: 70vh; height: 70vh;
            right: -35vh; bottom: 10%;
            border-left: 4px solid rgba(0,0,0,0.06);
            animation: rotateArc 50s linear infinite;
        }
        .arc-right-2 {
            width: 90vh; height: 90vh;
            right: -45vh; bottom: 5%;
            border-left: 2px solid rgba(0,0,0,0.04);
            animation: rotateArcReverse 70s linear infinite;
        }

        @keyframes rotateArc { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }
        @keyframes rotateArcReverse { from { transform: rotate(360deg); } to { transform: rotate(0deg); } }

        /* --- HEADER --- */
        header {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            padding: 50px 20px;
            text-align: center;
            box-shadow: var(--shadow);
            border-bottom: 1px solid rgba(0,0,0,0.05);
            position: relative;
            z-index: 10;
        }

        .profile-img {
            width: 160px; height: 160px;
            border-radius: 50%; object-fit: cover;
            border: 4px solid white;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            margin-bottom: 15px;
            transition: transform 0.3s;
        }
        .profile-img:hover { transform: scale(1.05); }

        h1 { margin: 0; color: var(--text-main); font-family: 'Montserrat', sans-serif; font-weight: 700; font-size: 2.2rem; }
        h2 { margin: 10px 0 20px; font-weight: 500; font-size: 1.1rem; text-transform: uppercase; letter-spacing: 2px; color: var(--text-light); }
        .bio { max-width: 700px; margin: 0 auto; color: var(--text-light); }

        /* --- NAVIGATION --- */
        nav {
            display: flex; justify-content: center; gap: 30px;
            margin: 40px 0; padding: 0 20px;
            flex-wrap: wrap;
        }

        .nav-btn {
            padding: 12px 35px;
            background: white;
            border: 2px solid transparent;
            color: var(--text-light);
            font-size: 1rem; font-weight: 600;
            cursor: pointer;
            border-radius: 50px;
            transition: all 0.3s ease;
            box-shadow: 0 5px 10px rgba(0,0,0,0.05);
            font-family: 'Montserrat', sans-serif;
            position: relative;
            overflow: hidden;
        }

        /* Couleurs spécifiques des boutons */
        .btn-port:hover, .btn-port.active {
            background: var(--theme-port-bg);
            color: var(--theme-port-dark);
            border-color: var(--theme-port-accent);
            box-shadow: 0 8px 20px rgba(161, 136, 127, 0.3);
        }

        .btn-form:hover, .btn-form.active {
            background: var(--theme-form-bg);
            color: var(--theme-form-dark);
            border-color: var(--theme-form-accent);
            box-shadow: 0 8px 20px rgba(100, 181, 246, 0.3);
        }

        .btn-exp:hover, .btn-exp.active {
            background: var(--theme-exp-bg);
            color: var(--theme-exp-dark);
            border-color: var(--theme-exp-accent);
            box-shadow: 0 8px 20px rgba(229, 115, 115, 0.3);
        }

        /* --- SECTIONS --- */
        .section-content {
            display: none;
            max-width: 1200px; margin: 0 auto 80px; padding: 0 20px;
            animation: fadeIn 0.6s ease;
        }
        .section-content.active { display: block; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }

        /* --- BARRE RECHERCHE --- */
        .search-wrapper { max-width: 500px; margin: 0 auto 40px; }
        .search-input {
            width: 100%; padding: 15px 25px;
            border-radius: 50px; border: 2px solid transparent;
            background: white; font-size: 1rem;
            box-shadow: var(--shadow); transition: all 0.3s;
            outline: none; font-family: 'Open Sans', sans-serif;
        }
        .search-input:focus { border-color: var(--theme-port-accent); }

        /* --- FILTRES --- */
        .filters { text-align: center; margin-bottom: 40px; }
        .filter-tag {
            display: inline-block; margin: 5px; padding: 6px 18px;
            border-radius: 30px; background: white; color: var(--text-light);
            cursor: pointer; font-size: 0.9rem; font-weight: 600;
            box-shadow: var(--shadow); transition: all 0.2s;
            border: 1px solid transparent;
        }
        .filter-tag:hover, .filter-tag.active {
            background: var(--theme-port-accent); color: white;
        }

        /* --- GRILLE PROJETS --- */
        .projects-grid {
            display: grid; grid-template-columns: repeat(auto-fill, minmax(340px, 1fr)); gap: 30px;
        }

        .card {
            background: white; border-radius: 12px; overflow: hidden;
            box-shadow: var(--shadow); transition: all 0.3s;
            cursor: pointer; border: 1px solid rgba(0,0,0,0.02);
            display: flex; flex-direction: column;
        }
        .card:hover { transform: translateY(-8px); box-shadow: var(--shadow-hover); }

        .card-img-wrapper { height: 200px; overflow: hidden; position: relative; }
        .card-img { width: 100%; height: 100%; object-fit: cover; transition: transform 0.5s; }
        .card:hover .card-img { transform: scale(1.08); }

        .card-body { padding: 20px; flex-grow: 1; display: flex; flex-direction: column; }
        .card-title { font-size: 1.15rem; margin: 10px 0; color: var(--text-main); font-weight: 700; }
        .card-summary { color: #777; font-size: 0.9rem; flex-grow: 1; margin-bottom: 15px; }

        /* Tags projets */
        .tag { font-size: 0.7rem; font-weight: 700; padding: 3px 8px; border-radius: 6px; margin-right: 5px; text-transform: uppercase; background: #eee; color: #555; }
        
        .card-footer {
            border-top: 1px solid #f0f0f0; padding-top: 15px;
            display: flex; justify-content: space-between; align-items: center;
            font-size: 0.8rem; color: #aaa;
        }
        .view-btn { color: var(--theme-port-dark); font-weight: 600; }


        /* --- TIMELINE HORIZONTALE (Formation & Expérience) --- */
        .timeline-horizontal {
            display: flex; justify-content: space-between; position: relative;
            margin-top: 40px; padding: 20px 0;
        }
        .timeline-horizontal::before {
            content: ''; position: absolute; top: 40px; left: 0; right: 0; height: 3px;
            background: #e0e0e0; z-index: -1; border-radius: 2px;
        }

        .timeline-col {
            flex: 1; text-align: center; padding: 0 15px; position: relative;
        }

        .timeline-dot {
            width: 20px; height: 20px; border-radius: 50%;
            margin: 0 auto 20px;
            border: 4px solid white;
            box-shadow: 0 0 0 2px rgba(0,0,0,0.1);
            background: #ccc;
            position: relative; top: 9px;
            transition: all 0.3s;
        }

        .timeline-card {
            background: white; padding: 25px; border-radius: 12px;
            box-shadow: var(--shadow); position: relative; margin-top: 25px;
            transition: transform 0.3s; border-top: 4px solid transparent;
        }
        .timeline-card:hover { transform: translateY(-5px); box-shadow: var(--shadow-hover); }

        /* Flèche carte */
        .timeline-card::before {
            content: ''; position: absolute; top: -10px; left: 50%; transform: translateX(-50%);
            border-width: 0 10px 10px 10px; border-style: solid;
            border-color: transparent transparent white transparent;
        }

        /* Thème Formation (Bleu) */
        .theme-blue .timeline-dot { background: var(--theme-form-accent); }
        .theme-blue .timeline-card { border-top-color: var(--theme-form-accent); }
        .theme-blue h3 { color: var(--theme-form-dark); margin: 0 0 5px; font-size: 1.1rem; }
        .theme-blue .t-date { background: var(--theme-form-bg); color: var(--theme-form-dark); padding: 3px 10px; border-radius: 15px; font-weight: bold; font-size: 0.8rem; display: inline-block; margin-bottom: 10px; }

        /* Thème Expérience (Rouge) */
        .theme-red .timeline-dot { background: var(--theme-exp-accent); }
        .theme-red .timeline-card { border-top-color: var(--theme-exp-accent); }
        .theme-red h3 { color: var(--theme-exp-dark); margin: 0 0 5px; font-size: 1.1rem; }
        .theme-red .t-date { background: var(--theme-exp-bg); color: var(--theme-exp-dark); padding: 3px 10px; border-radius: 15px; font-weight: bold; font-size: 0.8rem; display: inline-block; margin-bottom: 10px; }
        
        .t-place { display: block; font-weight: 600; font-size: 0.9rem; margin-bottom: 10px; color: #555; }
        .t-desc { font-size: 0.85rem; color: #777; text-align: left; }
        .t-desc ul { padding-left: 20px; margin: 0; }

        /* --- MODALE --- */
        .modal-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.8); backdrop-filter: blur(4px);
            display: none; justify-content: center; align-items: center; z-index: 1000;
        }
        .modal-overlay.open { display: flex; animation: fadeIn 0.3s; }
        
        .modal-box {
            background: white; width: 90%; max-width: 900px; max-height: 90vh;
            border-radius: 12px; overflow-y: auto; position: relative;
        }
        .modal-header { padding: 20px 30px; border-bottom: 1px solid #eee; display: flex; justify-content: space-between; align-items: center; background: white; position: sticky; top: 0; z-index: 2; }
        .modal-body { padding: 30px; }
        .modal-close { font-size: 2rem; cursor: pointer; border: none; background: none; color: #999; }
        
        /* Responsive */
        @media (max-width: 768px) {
            .timeline-horizontal { flex-direction: column; }
            .timeline-horizontal::before { left: 15px; width: 3px; height: 100%; top: 0; }
            .timeline-col { text-align: left; padding-left: 45px; margin-bottom: 30px; }
            .timeline-dot { position: absolute; left: 6px; top: 0; margin: 0; }
            .timeline-card::before { left: -10px; top: 15px; transform: rotate(-90deg); border-color: transparent white transparent transparent; }
        }
    </style>
</head>
<body>

<div class="arcs-container">
    <div class="arc arc-left-1"></div>
    <div class="arc arc-left-2"></div>
    <div class="arc arc-right-1"></div>
    <div class="arc arc-right-2"></div>
</div>

<header>
    <div class="profile-container">
        <img src="images/profile.jpg" alt="Oscar JG" class="profile-img" onerror="this.src='https://via.placeholder.com/160?text=O'">
    </div>
    <h1>Oscar JOSEPH-GENESLAY</h1>
    <h2>Data Scientist & Web Analyst</h2>
    <p class="bio">
        Transformation de données complexes en solutions concrètes.
        <br>Master Mégadonnées et Analyse Sociale au CFA Cnam.
    </p>
</header>

<nav>
    <button class="nav-btn btn-port active" onclick="switchTab('portfolio', this, 'port')">Mon Portfolio</button>
    <button class="nav-btn btn-form" onclick="switchTab('formation', this, 'form')">Formation</button>
    <button class="nav-btn btn-exp" onclick="switchTab('experience', this, 'exp')">Expérience Pro</button>
</nav>

<section id="portfolio" class="section-content active">
    
    <div class="search-wrapper">
        <input type="text" id="searchBar" class="search-input" placeholder="Rechercher un projet..." onkeyup="filterProjects()">
    </div>

    <div class="filters">
        <span class="filter-tag active" onclick="setTagFilter('all', this)">Tout</span>
        <span class="filter-tag" onclick="setTagFilter('Python', this)">Python</span>
        <span class="filter-tag" onclick="setTagFilter('R', this)">R</span>
        <span class="filter-tag" onclick="setTagFilter('SQL', this)">SQL</span>
        <span class="filter-tag" onclick="setTagFilter('PowerBI', this)">PowerBI</span>
    </div>

    <div class="projects-grid" id="grid">
        </div>
</section>

<section id="formation" class="section-content theme-blue">
    <div class="timeline-horizontal">
        
        <div class="timeline-col">
            <div class="timeline-dot"></div>
            <div class="timeline-card">
                <span class="t-date">2022</span>
                <h3>Baccalauréat Général</h3>
                <span class="t-place">Lycée Général</span>
                <div class="t-desc">Spécialités NSI et Maths. Mention Bien.</div>
            </div>
        </div>

        <div class="timeline-col">
            <div class="timeline-dot"></div>
            <div class="timeline-card">
                <span class="t-date">2022 - 2025</span>
                <h3>BUT Science des Données</h3>
                <span class="t-place">IUT Grand Ouest Normandie</span>
                <div class="t-desc">Cursus complet : Statistique décisionnelle, Programmation, Dataviz.</div>
            </div>
        </div>

        <div class="timeline-col">
            <div class="timeline-dot"></div>
            <div class="timeline-card">
                <span class="t-date">Actuellement</span>
                <h3>Master Mégadonnées</h3>
                <span class="t-place">CFA Cnam, Saint-Denis</span>
                <div class="t-desc">Spécialisation Big Data & Analyse Sociale.</div>
            </div>
        </div>

    </div>
</section>

<section id="experience" class="section-content theme-red">
    <div class="timeline-horizontal">
        
        <div class="timeline-col">
            <div class="timeline-dot"></div>
            <div class="timeline-card">
                <span class="t-date">Avril - Juin 2024</span>
                <h3>Consultant BI (Stage)</h3>
                <span class="t-place">KPMG Nord Normandie</span>
                <div class="t-desc">
                    <ul>
                        <li>Tableaux de bord financiers (PowerBI).</li>
                        <li>Audit de données RSE.</li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="timeline-col">
            <div class="timeline-dot"></div>
            <div class="timeline-card">
                <span class="t-date">Sept 2024 - Août 2025</span>
                <h3>Chargé d'études stats</h3>
                <span class="t-place">Observatoire UNICAEN</span>
                <div class="t-desc">
                    <ul>
                        <li>Automatisation R.</li>
                        <li>Enquêtes sociologiques.</li>
                        <li>Dataviz SphinxIQ3.</li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="timeline-col">
            <div class="timeline-dot"></div>
            <div class="timeline-card">
                <span class="t-date">Sept 2025 - Actuel</span>
                <h3>Web Analyst (Alternance)</h3>
                <span class="t-place">Wonderbox</span>
                <div class="t-desc">
                    <ul>
                        <li>Tracking GA4 & GTM.</li>
                        <li>A/B Testing (AB Tasty).</li>
                        <li>Conformité RGPD.</li>
                    </ul>
                </div>
            </div>
        </div>

    </div>
</section>

<div id="modalOverlay" class="modal-overlay" onclick="closeModal(event)">
    <div class="modal-box">
        <div class="modal-header">
            <h3 id="mTitle" style="margin:0; color:#333;">Titre</h3>
            <button class="modal-close" onclick="closeModal(event)">&times;</button>
        </div>
        <div class="modal-body">
            <div style="text-align:center; background:#f9f9f9; padding:10px; border-radius:8px; margin-bottom:20px;">
                <img id="mImg" src="" style="max-height:350px; max-width:100%;">
            </div>
            <div id="mTags" style="margin-bottom:20px;"></div>
            
            <h4 style="color:#5d4037; border-bottom:1px solid #ddd; padding-bottom:5px;">Contexte</h4>
            <p id="mDesc" style="color:#666;"></p>

            <h4 style="color:#5d4037; border-bottom:1px solid #ddd; padding-bottom:5px; margin-top:20px;">Démarche</h4>
            <p id="mApproach" style="color:#666;"></p>

            <h4 style="color:#5d4037; border-bottom:1px solid #ddd; padding-bottom:5px; margin-top:20px;">Compétences</h4>
            <p id="mSkills" style="color:#666;"></p>
        </div>
    </div>
</div>

<script>
    // --- DONNEES PROJETS ---
    const projects = [
        {
            title: "Enquête Batman & Population de Gotham",
            tags: ["Python", "SQL"],
            img: "images/p1.jpg",
            summary: "Croisement de données CSV et SQL pour identifier un individu.",
            description: "Projet divisé en deux parties : retrouver l'identité de Batman et analyser les caractéristiques démographiques.",
            approach: "Agrégation de données CSV, création d'une base SQLite. Croisement d'indices.",
            skills: "Manipulation de grands jeux de données, Logique SQL/Python.",
            place: "Université de Caen"
        },
        {
            title: "Automatisation de bulletins scolaires",
            tags: ["Python"],
            img: "images/p2.jpg",
            summary: "Script Python pour générer des bulletins scolaires.",
            description: "Création d'un système pour calculer les moyennes élèves/matières à partir de fichiers hétérogènes.",
            approach: "Nettoyage de données atypiques, conversion de types, algorithmique.",
            skills: "Nettoyage de données (Data Cleaning), Gestion d'erreurs.",
            place: "Université de Caen"
        },
        {
            title: "Analyse des locations Citibike NYC",
            tags: ["R"],
            img: "images/p3.jpg",
            summary: "Visualisation de la mobilité urbaine à New York.",
            description: "Étude complète des données de location de vélos (juin 2022).",
            approach: "Utilisation de RStudio pour filtrer, organiser et visualiser les données.",
            skills: "Programmation R, Analyse exploratoire.",
            place: "Université de Caen"
        },
        {
            title: "Régression : Indice de masse maigre",
            tags: ["R"],
            img: "images/p4.jpg",
            summary: "Modélisation liant morphologie et masse maigre.",
            description: "Étude de la corrélation entre l'indice de masse maigre et des mesures morphologiques.",
            approach: "Nettoyage, Nuages de points, Régression linéaire simple.",
            skills: "Modélisation statistique, Analyse de corrélation.",
            place: "Université de Caen"
        },
        {
            title: "Datawarehouse Météo & Pollution",
            tags: ["Python", "SQL"],
            img: "images/p5.jpg",
            summary: "Pipeline ETL complet vers MySQL.",
            description: "Construction d'un entrepôt de données météo et pollution.",
            approach: "Scripts Python (Pandas) pour nettoyer. Insertion MySQL.",
            skills: "ETL, SQL, Python.",
            place: "Université de Caen"
        },
        {
            title: "Séries Temporelles : Hôtellerie",
            tags: ["R"],
            img: "images/p6.jpg",
            summary: "Prévision des nuitées hôtelières en Normandie.",
            description: "Analyse des données INSEE (2011-2023) pour comprendre la dynamique touristique.",
            approach: "Régression linéaire par morceaux, coefficients saisonniers, prévision à N+1.",
            skills: "Séries chronologiques, Prévision.",
            place: "Université de Caen"
        },
        {
            title: "Prédiction Poids des Manchots",
            tags: ["R"],
            img: "images/p7.jpg",
            summary: "Régression multiple pour prédire une variable biologique.",
            description: "Estimation du poids des manchots selon caractéristiques physiques.",
            approach: "Comparaison : ANOVA, ANCOVA, Régression multiple.",
            skills: "Statistiques inférentielles, Modèles.",
            place: "Université de Caen"
        },
        {
            title: "Storytelling Dow Jones",
            tags: ["PowerBI"],
            img: "images/p8.jpg",
            summary: "Narration visuelle interactive des crises boursières.",
            description: "Création d'un storytelling sur l'indice Dow Jones.",
            approach: "Utilisation des signets (bookmarks) PowerBI.",
            skills: "Dataviz, Storytelling.",
            place: "Université de Caen"
        },
        {
            title: "Épidémiologie : Cancer du Poumon",
            tags: ["SAS", "R"],
            img: "images/p9.jpg",
            summary: "Modèle de Cox sur la cohorte AGRICAN.",
            description: "Lien entre pratiques agricoles et cancer du poumon.",
            approach: "Traitement SAS, Tests R, Modèle de Cox.",
            skills: "Biostatistiques, SAS, R.",
            place: "Université de Caen"
        },
        {
            title: "NoSQL : Migration Olist",
            tags: ["Python", "NoSQL"],
            img: "images/p10.jpg",
            summary: "Migration e-commerce vers MongoDB.",
            description: "Passage d'un format CSV à une base NoSQL MongoDB.",
            approach: "Script Python pymongo, indexation.",
            skills: "NoSQL, MongoDB, Optimisation.",
            place: "Université de Caen"
        },
        {
            title: "NLP & Datamining : Avis Clients",
            tags: ["Python"],
            img: "images/p11.jpg",
            summary: "Analyse de sentiments (Deep Learning).",
            description: "Prédiction de la satisfaction client via NLP.",
            approach: "NLP, Clustering SVD, Deep Learning.",
            skills: "Machine Learning, NLP.",
            place: "Université de Caen"
        },
        {
            title: "Big Data Agricole",
            tags: ["R"],
            img: "images/p12.jpg",
            summary: "Modèles ML avancés sur données massives.",
            description: "Prédiction santé via ratios activités agricoles.",
            approach: "ACP, Bootstrap, Forêts Aléatoires, Réseaux de neurones.",
            skills: "Big Data, Machine Learning.",
            place: "Université de Caen"
        }
    ];

    let currentTag = 'all';

    // --- FONCTIONS ---
    function switchTab(tabId, btn, theme) {
        document.querySelectorAll('.section-content').forEach(s => s.classList.remove('active'));
        document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('active'));
        document.getElementById(tabId).classList.add('active');
        btn.classList.add('active');
        
        // Change la couleur de fond global subtilement
        if(theme === 'port') document.body.style.backgroundColor = '#fdfbf7'; // Beige très clair
        if(theme === 'form') document.body.style.backgroundColor = '#f0f8ff'; // Bleu très clair
        if(theme === 'exp') document.body.style.backgroundColor = '#fff5f5';  // Rouge très clair
    }

    function renderProjects(list) {
        const grid = document.getElementById('grid');
        grid.innerHTML = '';
        if(list.length === 0) { grid.innerHTML = '<p>Aucun projet.</p>'; return; }

        list.forEach(p => {
            const originalIndex = projects.indexOf(p);
            const tags = p.tags.map(t => `<span class="tag">${t}</span>`).join('');
            const card = document.createElement('div');
            card.className = 'card';
            card.onclick = () => openModal(originalIndex);
            card.innerHTML = `
                <div class="card-img-wrapper">
                    <img src="${p.img}" class="card-img" onerror="this.src='https://via.placeholder.com/400x200?text=${p.title.charAt(0)}'">
                </div>
                <div class="card-body">
                    <div style="margin-bottom:10px;">${tags}</div>
                    <h3 class="card-title">${p.title}</h3>
                    <p class="card-summary">${p.summary}</p>
                    <div class="card-footer">
                        <span>${p.place}</span>
                        <span class="view-btn">Voir →</span>
                    </div>
                </div>
            `;
            grid.appendChild(card);
        });
    }

    function filterProjects() {
        const query = document.getElementById('searchBar').value.toLowerCase();
        const res = projects.filter(p => {
            const tagMatch = currentTag === 'all' || p.tags.includes(currentTag);
            const textMatch = p.title.toLowerCase().includes(query) || p.description.toLowerCase().includes(query);
            return tagMatch && textMatch;
        });
        renderProjects(res);
    }

    function setTagFilter(tag, btn) {
        currentTag = tag;
        document.querySelectorAll('.filter-tag').forEach(b => b.classList.remove('active'));
        btn.classList.add('active');
        filterProjects();
    }

    // Modal
    const modal = document.getElementById('modalOverlay');
    function openModal(idx) {
        const p = projects[idx];
        document.getElementById('mTitle').innerText = p.title;
        let img = document.getElementById('mImg');
        img.src = p.img; img.onerror = function() { this.src=`https://via.placeholder.com/600x300?text=${p.title}`; };
        document.getElementById('mTags').innerHTML = p.tags.map(t=>`<span class="tag" style="background:#5d4037; color:white;">${t}</span>`).join('');
        document.getElementById('mDesc').innerText = p.description;
        document.getElementById('mApproach').innerText = p.approach;
        document.getElementById('mSkills').innerText = p.skills;
        modal.classList.add('open');
        document.body.style.overflow = 'hidden';
    }
    function closeModal(e) {
        if(e.target===modal || e.target.classList.contains('modal-close')) {
            modal.classList.remove('open');
            document.body.style.overflow = 'auto';
        }
    }

    // Init
    renderProjects(projects);
</script>

</body>
</html>
